<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>Líder de Seção</title>
  <link rel="stylesheet" href="style.css">
  <script src="auth.js" defer></script>
  <script src="ui.js" defer></script>
  <script src="secao.js" defer></script>
</head>
<body>

<header class="topbar">
  <div>
    <h1>Sistema de Integração de Movimentação</h1>
    <p class="subtitle">Líder de Seção</p>
  </div>
  <div>
    <span data-user-info class="user-pill"></span>
    <a href="lider movimento.html" class="btn small">Ir para Líder de Movimento</a>
    <button class="btn small" onclick="logout()">Sair</button>
  </div>
</header>

<main class="container">
  <div class="grid-2">

    <section class="card">
      <h2>Novo pedido de peça</h2>

      <form id="form-pedido-secao">
        <div class="field-group">
          <label>Seção</label>
          <input type="text" name="secao" required>
        </div>

        <div class="field-row">
          <div class="field-group">
            <label>Tipo de movimentação</label>
            <select name="tipoMovimentacao">
              <option value="abastecimento">Abastecimento</option>
              <option value="retirada">Retirada</option>
              <option value="devolucao">Devolução</option>
              <option value="transferencia">Transferência</option>
            </select>
          </div>

          <div class="field-group">
            <label>Prioridade</label>
            <select name="prioridade">
              <option value="baixa">Baixa</option>
              <option value="media" selected>Média</option>
              <option value="alta">Alta</option>
              <option value="urgente">Urgente</option>
            </select>
          </div>
        </div>

        <div class="field-group">
          <label>Agendar para (opcional)</label>
          <input type="datetime-local" name="agendamento">
        </div>

        <hr class="divider">

        <h3>Dados da peça</h3>

        <div class="field-row">
          <div class="field-group">
            <label>Código da peça</label>
            <input type="text" name="codigoPeca" required>
          </div>
          <div class="field-group">
            <label>Descrição</label>
            <input type="text" name="descricaoPeca">
          </div>
        </div>

        <div class="field-row">
          <div class="field-group">
            <label>Nº da OP</label>
            <input type="text" name="numeroOP">
          </div>
          <div class="field-group">
            <label>Quantidade</label>
            <input type="number" name="quantidade" min="1" value="1" required>
          </div>
        </div>

        <div class="field-group">
          <label>Unidade</label>
          <input type="text" name="unidade">
        </div>

        <div class="field-group">
          <label>Observação</label>
          <textarea name="observacao" rows="3"></textarea>
        </div>

        <button class="btn full" type="submit">Registrar pedido</button>
      </form>
    </section>

    <section class="card">
      <div class="card-header">
        <h2>Meus pedidos</h2>
        <button type="button" class="btn small" id="btn-limpar-pedidos">Limpar tudo</button>
      </div>

      <div class="filters">
        <div class="field-group">
          <label>Status</label>
          <select id="filtro-status-secao">
            <option value="todos">Todos</option>
            <option value="aguardando">Aguardando</option>
            <option value="em_separacao">Em separação</option>
            <option value="em_transporte">Em transporte</option>
            <option value="entregue">Entregue</option>
            <option value="cancelado">Cancelado</option>
          </select>
        </div>

        <div class="field-group">
          <label>Prioridade</label>
          <select id="filtro-prioridade-secao">
            <option value="todas">Todas</option>
            <option value="baixa">Baixa</option>
            <option value="media">Média</option>
            <option value="alta">Alta</option>
            <option value="urgente">Urgente</option>
          </select>
        </div>
      </div>

      <div id="lista-pedidos-secao" class="table-wrapper"></div>
    </section>

  </div>

  <section class="card" style="margin-top:1rem;">
    <h2>Mapa industrial</h2>

    <div class="mapa-imagem-wrapper">
      <img src="mapa_fabrica.jpeg" class="mapa-imagem" alt="Mapa da fábrica">

      <button class="map-sector" data-secao="Usinagem"
        style="top:12%;left:12%;width:22%;height:25%;">Usinagem</button>
      <button class="map-sector" data-secao="Torno"
        style="top:15%;left:40%;width:20%;height:22%;">Torno</button>
      <button class="map-sector" data-secao="Prensa"
        style="top:45%;left:10%;width:25%;height:22%;">Prensa</button>
      <button class="map-sector" data-secao="Montagem"
        style="top:45%;left:40%;width:25%;height:25%;">Montagem</button>
      <button class="map-sector" data-secao="Almoxarifado"
        style="top:20%;left:70%;width:20%;height:40%;">Almox.</button>

      <div id="map-highlight" class="map-highlight map-highlight-hidden"></div>
    </div>

    <p class="landing-help" style="margin-top:0.5rem;">
      Clique em um setor do mapa para preencher a seção automaticamente.
    </p>
  </section>
</main>

<div id="toast-container" class="toast-container"></div>

<footer class="footer">
  <span>Sistema – Líder de Seção</span>
</footer>

</body>
</html>
